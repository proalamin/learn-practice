<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JobTrack ‚Äî Vacancy Tracker</title>
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Outfit:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --ink: #0f0f14;
    --paper: #f0f2f7;
    --card: #ffffff;
    --accent: #e63946;
    --accent2: #2b7a78;
    --muted: #8a91a8;
    --border: #e2e6f0;
    --shadow: 0 2px 20px rgba(0,0,0,0.06);
    --radius: 14px;
    --nav-h: 68px;
  }

  body {
    font-family: 'Plus Jakarta Sans', sans-serif;
    background: var(--paper);
    color: var(--ink);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* NAV */
  nav {
    background: #0f0f14;
    display: flex; align-items: center; justify-content: space-between;
    padding: 0 36px;
    height: var(--nav-h);
    position: sticky; top: 0; z-index: 100;
    border-bottom: 1px solid rgba(255,255,255,0.06);
    box-shadow: 0 4px 24px rgba(0,0,0,0.3);
  }
  .nav-logo {
    font-family: 'Outfit', sans-serif;
    font-weight: 900; font-size: 22px;
    color: #fff;
    letter-spacing: -0.8px;
  }
  .nav-logo span { color: var(--accent); }

  .nav-tabs {
    display: flex;
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 12px;
    padding: 4px;
    gap: 2px;
  }
  .nav-tab {
    background: none; border: none; cursor: pointer;
    color: rgba(255,255,255,0.5);
    font-family: 'Plus Jakarta Sans', sans-serif;
    font-size: 13px; font-weight: 700;
    padding: 9px 22px; border-radius: 9px;
    transition: all 0.2s;
    display: flex; align-items: center; gap: 7px;
    white-space: nowrap; letter-spacing: 0.1px;
  }
  .nav-tab.active {
    background: #fff;
    color: var(--ink);
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
  }
  .nav-tab:hover:not(.active) { color: rgba(255,255,255,0.75); background: rgba(255,255,255,0.08); }
  .nav-badge {
    background: var(--accent);
    color: white; font-size: 10px; font-weight: 700;
    padding: 2px 7px; border-radius: 20px;
    line-height: 1.4;
  }

  /* VIEWS */
  .view { display: none; padding: 32px; max-width: 1100px; margin: 0 auto; }
  .view.active { display: block; }

  /* PAGE HEADER */
  .page-header {
    display: flex; align-items: center; justify-content: space-between;
    margin-bottom: 28px;
  }
  .page-title {
    font-family: 'Outfit', sans-serif;
    font-weight: 800; font-size: 28px; letter-spacing: -0.8px;
  }
  .page-subtitle { color: var(--muted); font-size: 14px; margin-top: 2px; }

  /* BUTTONS */
  .btn {
    display: inline-flex; align-items: center; gap: 6px;
    padding: 10px 20px; border-radius: 10px; border: none;
    font-family: 'Plus Jakarta Sans', sans-serif; font-size: 14px; font-weight: 600;
    cursor: pointer; transition: all 0.15s;
  }
  .btn-primary { background: var(--ink); color: #fff; }
  .btn-primary:hover { background: #333; }
  .btn-accent { background: var(--accent); color: #fff; }
  .btn-accent:hover { background: #c0303b; }
  .btn-ghost { background: transparent; color: var(--ink); border: 1.5px solid var(--border); }
  .btn-ghost:hover { border-color: #bbb; background: #f9f6f2; }
  .btn-sm { padding: 6px 12px; font-size: 13px; }
  .btn-icon { padding: 7px; border-radius: 7px; }

  /* STATS */
  .stats-row { display: flex; gap: 16px; margin-bottom: 28px; flex-wrap: wrap; }
  .stat-card {
    background: var(--card); border-radius: var(--radius);
    padding: 18px 24px; flex: 1; min-width: 140px;
    box-shadow: var(--shadow); border: 1px solid var(--border);
  }
  .stat-value {
    font-family: 'Outfit', sans-serif; font-weight: 800; font-size: 32px;
    letter-spacing: -1px;
  }
  .stat-label { font-size: 13px; color: var(--muted); margin-top: 2px; font-weight: 500; }
  .stat-card.accent .stat-value { color: var(--accent); }
  .stat-card.teal .stat-value { color: var(--accent2); }

  /* TABLE */
  .table-wrap {
    background: var(--card); border-radius: var(--radius);
    border: 1px solid var(--border); overflow-x: auto;
    box-shadow: var(--shadow);
  }
  table { width: 100%; border-collapse: collapse; min-width: 760px; }
  thead { background: #fafaf8; }
  th {
    text-align: left; padding: 14px 16px;
    font-size: 12px; font-weight: 600;
    text-transform: uppercase; letter-spacing: 0.5px;
    color: var(--muted); border-bottom: 1px solid var(--border);
  }
  td { padding: 14px 16px; border-bottom: 1px solid var(--border); font-size: 14px; }
  tr:last-child td { border-bottom: none; }
  tr:hover td { background: #fafaf8; }

  .tag {
    display: inline-block; padding: 3px 10px; border-radius: 20px;
    font-size: 12px; font-weight: 500;
  }
  .tag-open { background: #d4edda; color: #155724; }
  .tag-soon { background: #fff3cd; color: #856404; }
  .tag-closed { background: #f8d7da; color: #721c24; }
  .tag-hidden { background: #e2e3e5; color: #383d41; }

  .action-btns { display: flex; gap: 6px; }
  .icon-btn {
    background: none; border: 1.5px solid var(--border);
    border-radius: 7px; padding: 5px 8px; cursor: pointer;
    font-size: 14px; transition: all 0.15s;
  }
  .icon-btn:hover { border-color: #999; background: #f5f2ed; }
  .icon-btn.danger:hover { border-color: var(--accent); background: #fff0f0; }

  /* MODAL */
  .modal-overlay {
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.4); backdrop-filter: blur(4px);
    z-index: 999; display: none; align-items: flex-start; justify-content: center;
    padding: 20px;
    overflow-y: auto;
  }
  .modal-overlay.open { display: flex; }
  .modal {
    background: var(--card); border-radius: 16px;
    padding: 32px; max-width: 560px; width: 100%;
    margin: 28px 0;
    box-shadow: 0 20px 60px rgba(0,0,0,0.2);
    animation: slideUp 0.2s ease;
  }
  @keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }
  .modal-title {
    font-family: 'Outfit', sans-serif; font-weight: 800;
    font-size: 22px; margin-bottom: 24px; letter-spacing: -0.5px;
  }
  .form-group { margin-bottom: 18px; }
  label { display: block; font-size: 13px; font-weight: 500; margin-bottom: 6px; color: #444; }
  input, textarea, select {
    width: 100%; padding: 10px 14px; border-radius: 8px;
    border: 1.5px solid var(--border); font-family: 'Plus Jakarta Sans', sans-serif;
    font-size: 14px; background: #fdfdfc; color: var(--ink);
    transition: border-color 0.15s;
    outline: none;
  }
  input:focus, textarea:focus, select:focus { border-color: var(--ink); }
  textarea { resize: vertical; min-height: 90px; }
  .modal-actions { display: flex; gap: 10px; justify-content: flex-end; margin-top: 24px; }

  /* USER - JOB CARDS */
  .jobs-grid {
    display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
  }
  .job-card {
    background: var(--card); border-radius: var(--radius);
    border: 1px solid var(--border); padding: 24px;
    box-shadow: var(--shadow);
    transition: transform 0.15s, box-shadow 0.15s;
    position: relative; overflow: hidden;
  }
  .job-card:hover { transform: translateY(-2px); box-shadow: 0 8px 30px rgba(0,0,0,0.1); }
  .job-card::before {
    content: ''; position: absolute; left: 0; top: 0; bottom: 0;
    width: 4px; background: var(--accent2);
    border-radius: 2px 0 0 2px;
  }
  .job-card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; }
  .job-title {
    font-family: 'Outfit', sans-serif; font-weight: 700; font-size: 17px;
    letter-spacing: -0.3px; line-height: 1.3;
  }
  .job-company { color: var(--muted); font-size: 14px; margin-bottom: 10px; }
  .job-deadline { font-size: 12px; color: var(--muted); margin-bottom: 14px; }
  .job-deadline strong { color: var(--ink); }
  .job-desc {
    font-size: 13px; color: #555; line-height: 1.6;
    display: -webkit-box; -webkit-line-clamp: 3;
    -webkit-box-orient: vertical; overflow: hidden;
    margin-bottom: 16px;
  }
  .job-card-footer { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }

  .status-select {
    padding: 6px 10px; font-size: 12px; font-weight: 500;
    border-radius: 20px; border: 1.5px solid var(--border);
    background: #fafaf8; cursor: pointer; flex: 1;
    min-width: 150px;
  }
  .status-select.interested { border-color: #6ea8fe; background: #e8f0ff; color: #084298; }
  .status-select.applied { border-color: #a3cfbb; background: #d1e7dd; color: #0a3622; }
  .status-select.interview_scheduled { border-color: #ffe08a; background: #fff3cd; color: #664d03; }
  .status-select.interview_done { border-color: #e2a9f3; background: #f3d9fa; color: #4a0d64; }
  .status-select.offer_received { border-color: #75d791; background: #d1f0d8; color: #0a3622; }
  .status-select.rejected { border-color: #f1a9a0; background: #fde8e5; color: #842029; }

  /* FILTERS */
  .filters { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 24px; }
  .filter-btn {
    padding: 7px 16px; border-radius: 20px; border: 1.5px solid var(--border);
    background: var(--card); font-family: 'Plus Jakarta Sans', sans-serif;
    font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.15s;
  }
  .filter-btn.active, .filter-btn:hover {
    background: var(--ink); color: white; border-color: var(--ink);
  }

  /* TOAST */
  .toast {
    position: fixed; bottom: 28px; right: 28px;
    background: var(--ink); color: white;
    padding: 12px 20px; border-radius: 10px; font-size: 14px;
    transform: translateY(80px); opacity: 0;
    transition: all 0.3s ease; z-index: 9999;
    box-shadow: 0 8px 24px rgba(0,0,0,0.2);
  }
  .toast.show { transform: translateY(0); opacity: 1; }
  .toast.success::before { content: '‚úì  '; color: #75d791; }

  /* EMPTY */
  .empty { text-align: center; padding: 60px 20px; color: var(--muted); }
  .empty-icon { font-size: 48px; margin-bottom: 12px; }
  .empty-text { font-size: 16px; }

  /* RESPONSIVE */
  @media (max-width: 900px) {
    nav { padding: 0 20px; }
    .view { padding: 24px 20px; }
    .page-header { flex-direction: column; align-items: flex-start; gap: 14px; }
    .modal { padding: 24px; }
  }

  @media (max-width: 640px) {
    nav {
      height: auto;
      min-height: var(--nav-h);
      padding: 12px 14px;
      flex-direction: column;
      align-items: stretch;
      gap: 10px;
    }
    .nav-logo { font-size: 20px; text-align: center; }
    .nav-tabs { width: 100%; }
    .nav-tab {
      flex: 1;
      justify-content: center;
      padding: 10px 8px;
      font-size: 12px;
    }
    .view { padding: 16px 12px; }
    .page-title { font-size: 23px; }
    .stats-row { gap: 10px; }
    .stat-card { min-width: calc(50% - 5px); padding: 14px 14px; }
    .stat-value { font-size: 26px; }
    .jobs-grid { grid-template-columns: 1fr; gap: 14px; }
    .job-card { padding: 16px; }
    .job-card-footer { flex-direction: column; align-items: stretch; }
    .status-select { width: 100%; min-width: 0; }
    .job-card-footer .btn { width: 100%; justify-content: center; }
    .filters { gap: 8px; }
    .filter-btn { padding: 7px 12px; font-size: 12px; }
    .modal-overlay { padding: 10px; }
    .modal { padding: 18px 14px; margin: 8px 0; max-height: none; overflow-y: visible; }
    .modal-title { font-size: 20px; margin-bottom: 16px; }
    .modal-actions { flex-direction: column-reverse; }
    .modal-actions .btn { width: 100%; justify-content: center; }
    .toast {
      right: 12px;
      left: 12px;
      bottom: 12px;
      text-align: center;
    }
  }
</style>
</head>
<body>

<nav>
  <div class="nav-logo">Vacancy<span>Tracker</span></div>
  <div class="nav-tabs">
    <button class="nav-tab active" onclick="switchView('admin')">‚öô Admin</button>
    <button class="nav-tab" onclick="switchView('user')">üë§ User View <span class="nav-badge" id="job-count">5</span></button>
  </div>
</nav>

<!-- ADMIN VIEW -->
<div class="view active" id="view-admin">
  <div class="page-header">
    <div>
      <div class="page-title">Job Vacancies</div>
      <div class="page-subtitle">Manage all job postings from here</div>
    </div>
    <button class="btn btn-primary" onclick="openAddModal()">Ôºã Add Job</button>
  </div>

  <div class="stats-row">
    <div class="stat-card"><div class="stat-value" id="stat-total">5</div><div class="stat-label">Total Jobs</div></div>
    <div class="stat-card accent"><div class="stat-value" id="stat-active">3</div><div class="stat-label">Active</div></div>
    <div class="stat-card teal"><div class="stat-value" id="stat-hidden">1</div><div class="stat-label">Hidden</div></div>
    <div class="stat-card"><div class="stat-value" id="stat-closed">1</div><div class="stat-label">Deadline Passed</div></div>
  </div>

  <div class="table-wrap">
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Job Title</th>
          <th>Company</th>
          <th>Deadline</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="admin-table-body"></tbody>
    </table>
  </div>
</div>

<!-- USER VIEW -->
<div class="view" id="view-user">
  <div class="page-header">
    <div>
      <div class="page-title">Open Positions</div>
      <div class="page-subtitle">Find and track your job applications</div>
    </div>
  </div>

  <div class="filters">
    <button class="filter-btn active" onclick="filterJobs('all', this)">All Jobs</button>
    <button class="filter-btn" onclick="filterJobs('interested', this)">Interested</button>
    <button class="filter-btn" onclick="filterJobs('applied', this)">Applied</button>
    <button class="filter-btn" onclick="filterJobs('interview_scheduled', this)">Interview</button>
    <button class="filter-btn" onclick="filterJobs('offer_received', this)">Offer</button>
  </div>

  <div class="jobs-grid" id="jobs-grid"></div>
</div>

<!-- ADD / EDIT MODAL -->
<div class="modal-overlay" id="modal">
  <div class="modal">
    <div class="modal-title" id="modal-title">Add New Job</div>
    <div class="form-group">
      <label>Job Title *</label>
      <input type="text" id="f-title" placeholder="e.g. Senior Frontend Developer">
    </div>
    <div class="form-group">
      <label>Company Name *</label>
      <input type="text" id="f-company" list="company-suggestions" placeholder="e.g. Acme Corp">
      <datalist id="company-suggestions"></datalist>
    </div>
    <div class="form-group">
      <label>Application Deadline *</label>
      <input type="date" id="f-deadline">
    </div>
    <div class="form-group">
      <label>Application Link</label>
      <input type="url" id="f-link" placeholder="https://...">
    </div>
    <div class="form-group">
      <label>Company Website URL</label>
      <input type="url" id="f-website" placeholder="https://company.com">
    </div>
    <div class="form-group">
      <label>Company Facebook URL</label>
      <input type="url" id="f-facebook" placeholder="https://facebook.com/company">
    </div>
    <div class="form-group">
      <label>Company LinkedIn URL</label>
      <input type="url" id="f-linkedin" placeholder="https://linkedin.com/company/company-name">
    </div>
    <div class="form-group">
      <label>Company Phone No</label>
      <input type="tel" id="f-phone" placeholder="+1 555 123 4567">
    </div>
    <div class="form-group">
      <label>Company Email ID</label>
      <input type="email" id="f-email" placeholder="hr@company.com">
    </div>
    <div class="form-group">
      <label>Description</label>
      <textarea id="f-desc" placeholder="Paste job description, requirements, benefits..."></textarea>
    </div>
    <div class="modal-actions">
      <button class="btn btn-ghost" onclick="closeModal()">Cancel</button>
      <button class="btn btn-primary" onclick="saveJob()">Save Job</button>
    </div>
  </div>
</div>

<!-- DELETE CONFIRM MODAL -->
<div class="modal-overlay" id="del-modal">
  <div class="modal" style="max-width:380px;text-align:center">
    <div style="font-size:40px;margin-bottom:12px">üóëÔ∏è</div>
    <div class="modal-title" style="justify-content:center">Delete Job?</div>
    <p style="color:var(--muted);font-size:14px;margin-bottom:24px">This action cannot be undone.</p>
    <div class="modal-actions" style="justify-content:center">
      <button class="btn btn-ghost" onclick="closeDelModal()">Cancel</button>
      <button class="btn btn-accent" onclick="confirmDelete()">Delete</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
// ---- DATA ----
let jobs = [
  { id: 1, title: 'Senior Frontend Developer', company: 'TechNova Ltd', deadline: '2026-03-15', link: '#', website: '', facebook: '', linkedin: '', phone: '', email: '', desc: 'Build beautiful React interfaces for our flagship SaaS product. You will work closely with design and backend teams. 3+ years experience required.', hidden: false, status: 'interested' },
  { id: 2, title: 'Product Designer', company: 'Creato Studio', deadline: '2026-03-05', link: '#', website: '', facebook: '', linkedin: '', phone: '', email: '', desc: 'Shape the visual identity and UX of our growing design tool. Figma expert preferred. Must have portfolio showcasing end-to-end product work.', hidden: false, status: 'applied' },
  { id: 3, title: 'Backend Engineer (Django)', company: 'DataBridge Inc', deadline: '2026-04-01', link: '#', website: '', facebook: '', linkedin: '', phone: '', email: '', desc: 'Join our platform team to build scalable REST APIs. Strong Python skills needed. Experience with PostgreSQL and Redis is a plus.', hidden: false, status: null },
  { id: 4, title: 'DevOps Engineer', company: 'CloudCore', deadline: '2026-02-20', link: '#', website: '', facebook: '', linkedin: '', phone: '', email: '', desc: 'Manage CI/CD pipelines and Kubernetes clusters. AWS certified preferred. On-call rotation shared across team.', hidden: false, status: null },
  { id: 5, title: 'Marketing Manager', company: 'GrowthLab', deadline: '2026-03-28', link: '#', website: '', facebook: '', linkedin: '', phone: '', email: '', desc: 'Lead digital marketing campaigns and brand strategy for a Series B startup. Experience with SEO, PPC, and content marketing required.', hidden: true, status: null },
];
let editId = null, deleteId = null, nextId = 6, currentFilter = 'all';

// ---- UTILS ----
function today() { return new Date().toISOString().split('T')[0]; }
function escapeHtml(s) {
  return s
    .replace(/&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;')
    .replace(/"/g, '&quot;')
    .replace(/'/g, '&#39;');
}
function deadlineTag(d) {
  if (!d) return '<span class="tag tag-open">Open</span>';
  if (d < today()) return '<span class="tag tag-closed">Closed</span>';
  const diff = Math.ceil((new Date(d) - new Date()) / 86400000);
  if (diff <= 7) return `<span class="tag tag-soon">Closes in ${diff}d</span>`;
  return `<span class="tag tag-open">Open</span>`;
}
function showToast(msg, type='success') {
  const t = document.getElementById('toast');
  t.textContent = msg; t.className = `toast ${type} show`;
  setTimeout(() => t.className = 'toast', 2500);
}
function updateCompanySuggestions() {
  const list = document.getElementById('company-suggestions');
  const uniqueCompanies = [...new Set(
    jobs
      .map(j => (j.company || '').trim())
      .filter(Boolean)
      .sort((a, b) => a.localeCompare(b))
  )];
  list.innerHTML = uniqueCompanies.map(name => `<option value="${escapeHtml(name)}"></option>`).join('');
}
function updateStats() {
  document.getElementById('stat-total').textContent = jobs.length;
  document.getElementById('stat-active').textContent = jobs.filter(j => !j.hidden && j.deadline >= today()).length;
  document.getElementById('stat-hidden').textContent = jobs.filter(j => j.hidden).length;
  document.getElementById('stat-closed').textContent = jobs.filter(j => j.deadline < today()).length;
  document.getElementById('job-count').textContent = jobs.filter(j => !j.hidden).length;
}

// ---- ADMIN TABLE ----
function renderAdmin() {
  const tbody = document.getElementById('admin-table-body');
  if (!jobs.length) { tbody.innerHTML = `<tr><td colspan="6"><div class="empty"><div class="empty-icon">üìã</div><div class="empty-text">No jobs yet. Add one!</div></div></td></tr>`; updateStats(); updateCompanySuggestions(); return; }
  tbody.innerHTML = jobs.map((j, i) => `
    <tr id="row-${j.id}" style="${j.hidden ? 'opacity:0.5' : ''}">
      <td style="color:var(--muted);font-size:12px">${i+1}</td>
      <td><strong>${j.title}</strong></td>
      <td>${j.company}</td>
      <td style="font-size:13px">${j.deadline || '‚Äî'} ${deadlineTag(j.deadline)}</td>
      <td>${j.hidden ? '<span class="tag tag-hidden">Hidden</span>' : deadlineTag(j.deadline)}</td>
      <td>
        <div class="action-btns">
          <button class="icon-btn" title="Edit" onclick="openEditModal(${j.id})">‚úèÔ∏è</button>
          <button class="icon-btn" title="${j.hidden ? 'Show' : 'Hide'}" onclick="toggleHide(${j.id})">${j.hidden ? 'üëÅÔ∏è' : 'üôà'}</button>
          <button class="icon-btn danger" title="Delete" onclick="openDelModal(${j.id})">üóëÔ∏è</button>
        </div>
      </td>
    </tr>
  `).join('');
  updateStats();
  updateCompanySuggestions();
}

// ---- USER CARDS ----
function renderUser() {
  const grid = document.getElementById('jobs-grid');
  let visible = jobs.filter(j => !j.hidden);
  if (currentFilter !== 'all') visible = visible.filter(j => j.status === currentFilter);
  if (!visible.length) {
    grid.innerHTML = `<div class="empty" style="grid-column:1/-1"><div class="empty-icon">üîç</div><div class="empty-text">No jobs found.</div></div>`;
    return;
  }
  grid.innerHTML = visible.map(j => `
    <div class="job-card">
      <div class="job-card-header">
        <div class="job-title">${j.title}</div>
        ${deadlineTag(j.deadline)}
      </div>
      <div class="job-company">üè¢ ${j.company}</div>
      <div class="job-deadline">Deadline: <strong>${j.deadline || 'Not specified'}</strong></div>
      <div class="job-desc">${j.desc}</div>
      <div class="job-card-footer">
        <select class="status-select ${j.status || ''}" onchange="setStatus(${j.id}, this)">
          <option value="" ${!j.status ? 'selected':''}>Track status‚Ä¶</option>
          <option value="interested" ${j.status==='interested'?'selected':''}>‚≠ê Interested</option>
          <option value="applied" ${j.status==='applied'?'selected':''}>üì® Applied</option>
          <option value="interview_scheduled" ${j.status==='interview_scheduled'?'selected':''}>üìÖ Interview Scheduled</option>
          <option value="interview_done" ${j.status==='interview_done'?'selected':''}>‚úÖ Interview Done</option>
          <option value="offer_received" ${j.status==='offer_received'?'selected':''}>üéâ Offer Received</option>
          <option value="rejected" ${j.status==='rejected'?'selected':''}>‚ùå Rejected</option>
        </select>
        ${j.link ? `<a href="${j.link}" target="_blank"><button class="btn btn-accent btn-sm">Apply ‚Üí</button></a>` : ''}
      </div>
    </div>
  `).join('');
}

function setStatus(id, sel) {
  const j = jobs.find(x => x.id === id);
  if (j) { j.status = sel.value; sel.className = `status-select ${sel.value}`; renderUser(); showToast('Status updated!'); }
}

function filterJobs(f, btn) {
  currentFilter = f;
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  renderUser();
}

// ---- MODAL ----
function openAddModal() {
  editId = null;
  document.getElementById('modal-title').textContent = 'Add New Job';
  ['title','company','deadline','link','website','facebook','linkedin','phone','email','desc'].forEach(f => document.getElementById('f-'+f).value = '');
  document.getElementById('modal').classList.add('open');
}
function openEditModal(id) {
  editId = id;
  const j = jobs.find(x => x.id === id);
  document.getElementById('modal-title').textContent = 'Edit Job';
  document.getElementById('f-title').value = j.title;
  document.getElementById('f-company').value = j.company;
  document.getElementById('f-deadline').value = j.deadline;
  document.getElementById('f-link').value = j.link;
  document.getElementById('f-website').value = j.website || '';
  document.getElementById('f-facebook').value = j.facebook || '';
  document.getElementById('f-linkedin').value = j.linkedin || '';
  document.getElementById('f-phone').value = j.phone || '';
  document.getElementById('f-email').value = j.email || '';
  document.getElementById('f-desc').value = j.desc;
  document.getElementById('modal').classList.add('open');
}
function closeModal() { document.getElementById('modal').classList.remove('open'); }

function saveJob() {
  const title = document.getElementById('f-title').value.trim();
  const company = document.getElementById('f-company').value.trim();
  if (!title || !company) { showToast('Title and company are required', 'error'); return; }
  const data = {
    title, company,
    deadline: document.getElementById('f-deadline').value,
    link: document.getElementById('f-link').value,
    website: document.getElementById('f-website').value.trim(),
    facebook: document.getElementById('f-facebook').value.trim(),
    linkedin: document.getElementById('f-linkedin').value.trim(),
    phone: document.getElementById('f-phone').value.trim(),
    email: document.getElementById('f-email').value.trim(),
    desc: document.getElementById('f-desc').value,
  };
  if (editId) {
    Object.assign(jobs.find(j => j.id === editId), data);
    showToast('Job updated!');
  } else {
    jobs.push({ id: nextId++, hidden: false, status: null, ...data });
    showToast('Job added!');
  }
  closeModal(); renderAdmin(); renderUser();
}

// ---- DELETE ----
function openDelModal(id) { deleteId = id; document.getElementById('del-modal').classList.add('open'); }
function closeDelModal() { document.getElementById('del-modal').classList.remove('open'); }
function confirmDelete() {
  jobs = jobs.filter(j => j.id !== deleteId);
  closeDelModal(); renderAdmin(); renderUser(); showToast('Job deleted.');
}

// ---- HIDE ----
function toggleHide(id) {
  const j = jobs.find(x => x.id === id);
  j.hidden = !j.hidden;
  renderAdmin(); renderUser();
  showToast(j.hidden ? 'Job hidden from users.' : 'Job visible to users.');
}

// ---- SWITCH VIEW ----
function switchView(v) {
  document.querySelectorAll('.view').forEach(el => el.classList.remove('active'));
  document.getElementById('view-'+v).classList.add('active');
  document.querySelectorAll('.nav-tab').forEach((t,i) => t.classList.toggle('active', (v==='admin'&&i===0)||(v==='user'&&i===1)));
  if (v === 'user') renderUser();
}

// Close modals on overlay click
['modal','del-modal'].forEach(id => {
  document.getElementById(id).addEventListener('click', function(e) {
    if (e.target === this) this.classList.remove('open');
  });
});

// Init
renderAdmin(); renderUser();
</script>
</body>
</html>
